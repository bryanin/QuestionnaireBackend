## Цель проекта
Данное приложение - инструмент взаимодействия клиентов, инженеров по продвижению и проектировщиков компании "Луис+". 
Главные сущности системы - пользователь (сотрудник, клиент), проект и задача. 
Дополнительные: комментарии к задачам, компании, адреса, файлы проекта, опросные листы к задачам и т.п.


## Пользователь
Абстрактный пользователь имеет следующие поля: id, email, firstName, lastName, companyId, phone, password, securityRole, accessStatus. 
Пользователи разделены на сотрудников и клиентов. 


### Клиент (CUSTOMER)
Дополнительные поля: customerPosition, relatedCompanies. 


Представлены следующие роли клиентов:
- DIRECTOR
- HEAD_OF_DEPARTMENT
- DESIGNER
- INSTALLER


Предусмотрен следующий функционал:
#### [v.1.] Работа с опросными листами 
1. См. п. 1 в описании Инженера по продвижению! Клиент получает email с ссылкой на редактирование задачи, а также с коротким одноразовым паролем. 
2. Клиент заполняет анкету по каждой системе отдельно (в анкете представлена только одна система). У пользователя есть возможность заполнять только обязательные поля (обсудить!).
3. После заполнения пользователь нажимает кнопку отправить. Появляется всплывающее сообщение об успешной отправке: "Уважаемый клиент! Ваша заявка принята и передана ответственному за регион специалисту <ФИО и почта специалиста>. 
Информация отправлена на указанную Вами почту. Если письма нет, проверьте папку Спам. Вы будете получать уведомления об изменении статуса заявки на данный email."
4. На почту ответственного за регион инженера по продвижению и его руководителя (в копии) приходит письмо о создании новой заявки. В заявке обновляется анкета. 
5. На почту заполнившего заявку клиента приходит письмо о создании заявки: "Уважаемый клиент! Ваша заявка принята и передана ответственному за регион специалисту <ФИО и почта специалиста>. 
Если хотите получать уведомления об изменении статуса заявки на данный email, перейдите по ссылке: ... ". Прикрепляется ссылка на подписку.
#### [v.2.] Личный кабинет
1. Клиенту предоставляется личный кабинет, доступный после регистрации через email. Возможен просмотр списка задач в работе, а также корректировка, добавление заявок. Виден статус заявки, сроки окончания проектирования.

### Сотрудник (EMPLOYEE)
Дополнительные поля: employeePosition. 


Представлены следующие роли сотрудников:
- HEAD_OF_PROMOTION_DEPARTMENT
- HEAD_OF_PROMOTION_DEPARTMENT_ASSISTANT
- HEAD_OF_DESIGN_DEPARTMENT
- SENIOR_DESIGNER
- MIDDLE_DESIGNER
- JUNIOR_DESIGNER
- HEAD_OF_ENGINEER_PROMOTION_DEPARTMENT
- SENIOR_ENGINEER
- MIDDLE_ENGINEER
- JUNIOR_ENGINEER
- HEAD_OF_SALES
- SENIOR_SALES_MANAGER
- MIDDLE_SALES_MANAGER
- JUNIOR_SALES_MANAGER

### Руководитель отдела по работе с проектными организациями (HEAD_OF_ENGINEER_PROMOTION_DEPARTMENT)
#### [v.1] 


### Инженер по продвижению (SENIOR_ENGINEER, MIDDLE_ENGINEER, JUNIOR_ENGINEER)
#### [v.1.] Создание задачи на проектирование
1. Инженер по продвижению создает новый проект или открывает уже существующий. Из проекта создает задачу на проектироование одной конкретной системы безопасности. В структуре задачи есть поле Questionnaie, которое представляет из себя шаблон анкеты на проектирование этой конкретной системы безопасности. Инженер может самостоятельно редактировать поля задачи, вносить исправление в поле анкеты, а может указать email клиента и отправить ему эту анкету на заполнение. Создается пиьсмо для клиента, в котором есть ссылка на редактирование задачи (генерируется при отправке задачи), одноразовый пароль (генерируется при отправке задачи), а также краткая инструкция для клиента.
2. Инженер может открыть любую заявку. Он может редактировать, менять статус заявки, владельцем которой он является. Может создавать новые заявки из проектов, владельцем которой он является. 
3. Заявки не могут существовать без проекта. К одному проекту могут быть привязаны множество заявок без ограничений.
4. Изменение статуса заявки позволяет передавать ее от участника к участнику (см. алгоритм движения заявки).
#### [v.2.] Личный кабинет, обмен задачами
1. Инженеру по продвижению предоставляется личный кабинет, доступный после регистрации через email
2. В разделе "Задачи" инженер может видеть весь список заявок от клиентов, настраивать этот список (фильтры "Активные задачи", "В архиве", фильтровать по клиентам, объектам и прочим полям задачи).
3. Инженер может запросить замену сроков по заявке. При этом на отдельной странице он добавляет комментарий, желаемый срок, а также заявку на замену (если такая имеется). По результатам запроса руководитель проектного отдела либо отклоняет запрос с комментарием, либо принимает замену, меняя сроки задач.


### Руководитель проектного отдела (HEAD_OF_DESIGN_DEPARTMENT)
#### [v.1] 


### Проектировщик (SENIOR_DESIGNER, MIDDLE_DESIGNER, JUNIOR_DESIGNER)
#### [v.1] Доступ к задаче на проектирование по ссылке
1. Проектировщик имеет доступ к задаче по ссылке. Ссылка генерируется при отправке задачи. Изначально ее получает инженер, вносит изменения по необходимости, затем передает руководителю проектного отдела, который распределяет задачи.


## Проект
Проект имеет следующие поля: id, id_1C, title, description, ownerEmail, addressList, createdAt, status, taskList, projectsFiles, projectsPartners.

- id - уникальный идентификатор проекта. Генерируется автоматически. Уникальное значение. Обязательное поле
- id_1C - номер проекта в 1С. Уникальное значение. Обязательное поле
- title - название проекта. Обязательное поле
- description - описание проекта
- ownerEmail - email владельца проекта. Обязательное поле
- addressList - список адресов, связанных с объектом
- createdAt - дата создания проекта. Неизменяемое значение. Обязательное поле
- status - текущий статус проекта: WITH_ACTIVE_TASKS, WITHOUT_ACTIVE_TASKS. Обязательное поле (по умолчанию WITHOUT_ACTIVE_TASKS)
- taskList - перечень заявок, связанных с данным проектом
- projectsFiles - перечень файлов, связанных с данным проектом (на первых этапах для упрощения здесь будут храниться ссылки на файлы)
- projectsPartners - перечень организаций, связанных с данным проектом. 


## Задача
Задача имеет следующие поля: id, ownerEmail, status, complexity, projectId, commentList, system, questionnaire, performerEmail, stageList, createdAt, projectsFiles.

- id - уникальный идентификатор задачи. Генерируется автоматически. Уникальное значение. Обязательное поле
- ownerEmail - email владельца проекта. Обязательное поле
- status - текущий статус задачи: 
  - IN_HEAP("Новая")
  - UNDER_INITIAL_REVIEW_BY_ENGINEER("На первичной проверке инженером")
  - UNDER_INITIAL_REVIEW_BY_HEAD_OF_DESIGN_DEPARTMENT("На проверке у руководителя проектного отдела")
  - IN_QUEUE("В очереди задач"),
  - CHANGED_IN_QUEUE("Изменена после утверждения"),
  - CHOSEN_BY_DESIGNER("Выбрана потенциальным исполнителем"),
  - ASSIGNED_TO_PERFORMER("Назначена исполнителю"),
  - UNDER_FINAL_REVIEW_BY_ENGINEER("Выполнена. На проверке у инженера"),
  - UNDER_DISPUTE("Открыт спор"),
  - DISPUTE_REJECTED("Спор отклонен"),
  - UNDER_REVIEW_BY_CUSTOMER("На проверке у клиента"),
  - ACCEPTED_BY_CUSTOMER("Согласована клиентом"),
  - ARCHIVED("Согласована клиентом");)
- complexity - сложность задачи:
  - LEVEL_1("*")
  - LEVEL_2("**")
  - LEVEL_3("***")
  - LEVEL_4("****")
  - LEVEL_5("*****")
- projectId - id проекта, к которому привязана заявка
- commentList - список комментариев (сообщений) по задаче
- system - система:
  - SOT("Система видеонаблюдения")
  - SPS ("Система пожарной сигнализации")
  - APPZ("Автоматика противопожарной защиты")
  - AUPT("Автоматическая установка пожаротушения")
  - SOUE("Система оповещения и управления эвакуацией")
  - SOTS("Система охранно-тревожной сигнализации")
  - SKUD("Система контроля и управления доступом")
- questionnaire - анкета (опросный лист)
- performerEmail - email исполнителя задачи
- stageList - объем задачи:
  - SCHEMATIC_DESIGN ("Стадия П")
  - CONSTRUCTION_DOCUMENTS ("Стадия Р")
  - SPECIFICATION("Спецификация")
  - ARRANGEMENT_DRAWING("Чертеж с расстановкой")
  - PIPE_ARRANGEMENT_DRAWING ("Чертеж с трубной разводкой")
  - SCHEMATIC_DIAGRAM("Структурная схема")
  - EXPLANATORY_NOTE("Пояснительная записка")
  - SP_CALCULATION("Акустический расчет")
  - CONNECTION_SCHEME("Схема подключений")
  - POWER_SUPPLY_CALCULATION("Задание на электроснабжение")
  - AXONOMETRIC_DIAGRAM ("Аксонометрическая схема")
  - CABLE_LOCATION_CABLE("Кабельный журнал")
  - BATTERY_BACKUP_CALCULATION ("Расчет источников резервного питания")
  - HYDRAULIC_CALCULATION("Гидравлический расчет")
- createdAt - дата создания задачи. Неизменяемое значение. Обязательное поле
- projectsFiles - перечень файлов, связанных с данным проектом (на первых этапах для упрощения здесь будут храниться ссылки на файлы)


## Используемые технологии
- Java 8
- Spring Framework (Spring Boot, Spring Security, Spring Data JPA)
- PostgreSQL
- JavaScript ES6
- VueJS 3
- HTML5
- CSS
